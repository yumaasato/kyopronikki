QuickSort(A,p,r) {
  if p < r
  q = partition(A,p,r)
  quicksort(A,p,q-1)
  quicksort(A,q+1,r)
}

partition(A,p,r)
x = A[r]
i = p - 1
for j = p to r - 1
  if A[j] <= x  // pivot以下の場合
    i += 1
    swap(A[i], A[r])
swap(A[i+1], A[r])
return i + 1

randomized-partiton(A,p,r)
i = random(p,r)
A[r]とA[i]を交換する
return partition(A,p,r)

randomized-partition(A,p,r)
if p < r
  q = randomized-partition(A,p,r)
  randomized-quicksort(A,p,q-1)
  randomized-quicksort(A,q+1,r)